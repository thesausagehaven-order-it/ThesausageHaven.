<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Sausage Haven - Order Now</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">

  <!-- Header -->
  <header class="bg-red-600 text-white p-6 shadow-md">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
      <h1 class="text-3xl font-bold">The Sausage Haven</h1>
      <nav class="space-x-4">
        <a href="#order" class="hover:underline">Order Now</a>
        <a href="#contact" class="hover:underline">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="bg-gradient-to-r from-red-400 to-red-600 text-white py-20 text-center">
    <div class="max-w-4xl mx-auto">
      <h2 class="text-4xl font-bold mb-4">Fresh & Delicious Sausages Delivered!</h2>
      <p class="text-lg mb-6">Order online and get your favorite sausages straight to your hostel or home.</p>
      <a href="#order" class="bg-white text-red-600 font-bold px-8 py-3 rounded-lg shadow hover:bg-gray-100 transition">Place Your Order</a>
    </div>
  </section>

  <!-- Order Form Section -->
  <section id="order" class="py-16">
    <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-md">
      <h3 class="text-3xl font-bold text-gray-800 mb-6 text-center">Place Your Order</h3>
      <form action="https://script.google.com/macros/s/AKfycbxJGHfyO9eWIn6rdwUhkmVRgqPnX38FPwz58UekuvKdSb_onFt-6nGo4n3NEo2oC5ll/exec" method="POST" class="space-y-6">
        
        <!-- Full Name -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Full Name</label>
          <input type="text" name="FullName" placeholder="e.g., John Doe" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
        </div>
		  
		  <br>

        <!-- Phone Number -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Phone Number</label>
          <input type="tel" name="PhoneNumber" placeholder="e.g., 0241234567" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
        </div><br>


        <!-- Delivery Location -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Delivery Location</label>
          <input type="text" name="DeliveryLocation" placeholder="e.g., Hostel A, Room 12" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
        </div><br>


        <!-- Quantity -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Quantity</label>
          <input type="number" name="Quantity" min="1" max="50" step="1" required
  class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">

        </div><br>


        <!-- Preferred Delivery Time -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Preferred Delivery Time</label>
          <input type="time" name="DeliveryTime" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
          <p class="text-gray-500 text-sm mt-1">Orders are prepared fresh and delivered as soon as possible.</p>
        </div><br>


        <!-- Payment Method -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Payment Method</label>
          <select name="PaymentMethod" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
            <option value="">Select a method</option>
            <option value="Cash">Cash on Delivery</option>
            <option value="MoMo">Mobile Money (small processing fee applies)</option>
          </select>
        </div><br>


        <!-- Additional Notes -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Additional Notes</label>
          <textarea name="AdditionalNotes" placeholder="Special requests..." rows="3"
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400"></textarea>
        </div><br>
<br>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit"
            class="bg-red-600 text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-red-700 transform hover:scale-105 transition duration-300">
            Submit Order
          </button>
        </div>
      </form>
    </div>
  </section><br>
<br>


<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Staff - The Sausage Haven Orders</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">

  <!-- Password Entry (Simple Protection) -->
  <div id="passwordDiv" class="flex items-center justify-center h-screen">
    <div class="bg-white p-8 rounded-lg shadow-md w-96 text-center">
      <h2 class="text-2xl font-bold mb-4">Staff Login</h2>
      <input type="password" id="staffPassword" placeholder="Enter staff password"
        class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400 mb-4">
      <button onclick="checkPassword()"
        class="bg-red-600 text-white font-bold px-6 py-2 rounded hover:bg-red-700">Login</button>
    </div>
  </div>

  <!-- Staff Form -->
  <section id="staffFormSection" class="hidden py-16">
    <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-md">
      <h3 class="text-3xl font-bold text-gray-800 mb-6 text-center">Walk-in Order Entry</h3>
    <form id="staffForm" action="https://script.google.com/macros/s/AKfycbxJGHfyO9eWIn6rdwUhkmVRgqPnX38FPwz58UekuvKdSb_onFt-6nGo4n3NEo2oC5ll/exec" method="POST" class="space-y-6">
  <!-- Hidden fields so Apps Script gets valid input -->

 

        <!-- Full Name -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Full Name</label>
          <input type="text" name="FullName" placeholder="e.g., John Doe" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
        </div>

        <!-- Phone Number -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Phone Number</label>
          <input type="tel" name="PhoneNumber" placeholder="e.g., 0241234567" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
        </div>
		
		<div> <input type="hidden" name="DeliveryLocation" value="Walk-In">
			</div>
		  
        <!-- Quantity -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Quantity</label>
          <input type="number" name="Quantity" min="1" placeholder="e.g., 2" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
        </div>
		<div>
			 <input type="hidden" name="PreferredDeliveryTime" value="">
		</div>

        <!-- Payment Method -->
        <div>
          <label class="block text-gray-700 font-medium mb-2">Payment Method</label>
          <select name="PaymentMethod" required
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-400">
            <option value="">Select a method</option>
            <option value="Cash">Cash</option>
            <option value="MoMo">MoMo</option>
          </select>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit"
            class="bg-red-600 text-white font-bold px-6 py-3 rounded-lg shadow hover:bg-red-700 transform hover:scale-105 transition duration-300">
            Submit Order
          </button>
        </div>
      </form>
    </div>
  </section>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxJGHfyO9eWIn6rdwUhkmVRgqPnX38FPwz58UekuvKdSb_onFt-6nGo4n3NEo2oC5ll/exec";

// Simple password protection
function checkPassword() {
  const pass = document.getElementById("staffPassword").value;
  const correctPassword = "Staff123"; // <-- change this to your secure password
  if(pass === correctPassword){
    document.getElementById("passwordDiv").style.display = "none";
    document.getElementById("staffFormSection").classList.remove("hidden");
  } else {
    alert("Incorrect password");
  }
}

// Submit staff form
document.getElementById("staffForm").addEventListener("submit", async function(e){
  e.preventDefault();

  const formData = new FormData(this);
  const data = new URLSearchParams(formData).toString();

  try {
    const response = await fetch(SCRIPT_URL, {
      method: "POST",
      headers: {"Content-Type": "application/x-www-form-urlencoded"},
      body: data
    });

    const result = await response.text();
    console.log("Staff order response:", result);

    // Redirect based on payment method
    const paymentMethod = formData.get("PaymentMethod");
    if(paymentMethod.toLowerCase() === "cash"){
      alert("Cash order submitted successfully!");
      this.reset();
    } else if(paymentMethod.toLowerCase() === "momo"){
      alert("MoMo order submitted! Proceed to payment.");
      // Here you could redirect to Paystack link if you want
    }

  } catch(err){
    console.error("Error submitting order:", err);
    alert("Something went wrong. Please try again.");
  }
});
</script>

</body>
</html>


	<!-- STAFF DASHBOARD -->
<section id="staffDashboard" class="hidden py-16 bg-gray-50">
  <div class="max-w-5xl mx-auto bg-white p-8 rounded-lg shadow-md">
    <h3 class="text-3xl font-bold text-gray-800 mb-6 text-center">
      Staff Dashboard - Pending Deliveries
    </h3>

    <p class="text-gray-600 mb-6 text-center">
      Staff login only. Only orders assigned to you with "Pending Delivery" will appear.
    </p>

    <table id="ordersTable" class="w-full border-collapse border text-sm">
      <thead class="bg-gray-100">
        <tr>
          <th class="border px-3 py-2">Order No</th>
          <th class="border px-3 py-2">Customer</th>
          <th class="border px-3 py-2">Phone</th>
          <th class="border px-3 py-2">Qty</th>
          <th class="border px-3 py-2">Payment</th>
          <th class="border px-3 py-2">Delivery Point</th>
          <th class="border px-3 py-2">Invoice</th>
          <th class="border px-3 py-2">Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>

<div class="text-center my-6">
  <button id="staffLoginBtn" class="bg-gray-700 text-white px-6 py-3 rounded shadow hover:bg-gray-800">
    Staff Login
  </button>
</div>

<script>
const staffPassword = "Staff123"; // Change this to your desired password
const SCRIPT_URL = "https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec";

let refreshInterval;

// ==== STAFF LOGIN ====
document.getElementById("staffLoginBtn").addEventListener("click", () => {
  const password = prompt("Enter staff password:");
  if(password === staffPassword) {
    document.getElementById("staffDashboard").classList.remove("hidden");
    alert("Access granted. Welcome!");
    loadOrders(); // Initial load
    refreshInterval = setInterval(loadOrders, 60000); // Refresh every 60s
  } else if(password) {
    alert("Incorrect password. Access denied.");
  }
});

// ==== LOAD PENDING ORDERS ====
async function loadOrders() {
  try {
    const res = await fetch(`${SCRIPT_URL}?type=assignedPending`);
    if(!res.ok) throw new Error("Network response was not ok");
    const orders = await res.json();

    const tbody = document.querySelector("#ordersTable tbody");
    tbody.innerHTML = "";

    if(orders.length === 0) {
      tbody.innerHTML = `<tr><td colspan="8" class="text-center py-4 text-gray-500">No pending deliveries.</td></tr>`;
      return;
    }

    orders.forEach(o => {
      const row = document.createElement("tr");
      row.classList.add("hover:bg-gray-50");
      row.innerHTML = `
        <td class="border px-3 py-2">${o.OrderNumber || ""}</td>
        <td class="border px-3 py-2">${o.FullName || ""}</td>
        <td class="border px-3 py-2">${o.PhoneNumber || ""}</td>
        <td class="border px-3 py-2">${o.Quantity || ""}</td>
        <td class="border px-3 py-2">${o.PaymentMethod || ""}</td>
        <td class="border px-3 py-2">${o.DeliveryPoint || ""}</td>
        <td class="border px-3 py-2 text-center">
          ${o.InvoiceUrl ? `<a href="${o.InvoiceUrl}" target="_blank" class="text-blue-600 underline">View</a>` : ""}
        </td>
        <td class="border px-3 py-2 text-center">
          <button onclick="markDelivered(${o._rowNumber})" 
            class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">
            Delivered
          </button>
        </td>
      `;
      tbody.appendChild(row);
    });
  } catch(err) {
    console.error("Failed to load orders:", err);
    alert("Failed to fetch orders. Please check your network or script URL.");
  }
}

// ==== MARK ORDER AS DELIVERED ====
async function markDelivered(row) {
  if(!confirm("Mark this order as Delivered?")) return;

  try {
    const res = await fetch(SCRIPT_URL, {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: `action=markDelivered&row=${row}`
    });

    const result = await res.text();
    console.log(result);

    alert("Order marked as delivered!");
    loadOrders(); // Refresh table
  } catch(err) {
    console.error(err);
    alert("Failed to update delivery status.");
  }
}
</script>



  <!-- Contact Section -->
  <section id="contact" class="py-16 bg-gray-100">
    <div class="max-w-4xl mx-auto text-center">
      <h3 class="text-3xl font-bold text-gray-800 mb-4">Contact Us</h3>
      <p class="text-gray-600 mb-2">Phone: 0256507851</p>
      <p class="text-gray-600">Email: thesausagehaven@gmail.com</p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-red-600 text-white p-6 mt-8 text-center">
    Â© 2025 The Sausage Haven. All rights reserved.
  </footer>

</body>
</html>


<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxJGHfyO9eWIn6rdwUhkmVRgqPnX38FPwz58UekuvKdSb_onFt-6nGo4n3NEo2oC5ll/exec"; // Paste your deployed Web App URL here

document.getElementById("orderForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const formData = new FormData(this);
  const data = new URLSearchParams(formData).toString();

  try {
    const response = await fetch(SCRIPT_URL, {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: data
    });

    const result = await response.text();
    console.log("Order response:", result);

    // Redirect based on payment method
    const paymentMethod = formData.get("paymentMethod");
    if (paymentMethod.toLowerCase() === "cash") {
      // Redirect to thank-you page for cash
      window.location.href = "https://sites.google.com/view/thesausagehaven/home?status=cash";
    } else if (paymentMethod.toLowerCase() === "momo") {
      // Redirect to thank-you page for MoMo (after payment, Apps Script sends SMS)
      window.location.href = "https://sites.google.com/view/thesausagehaven/home?status=momo";
    }
  } catch (err) {
    console.error("Error submitting order:", err);
    alert("Something went wrong. Please try again.");
  }
});
</script>









